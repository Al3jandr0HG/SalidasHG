<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mostrar Citas</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: black;
            color: yellow;
            text-align: center;
            margin: 0;
            padding: 0;
        }
        button {
            background-color: #4CAF50; /* Verde */
            color: white;
            padding: 12px 30px;
            border: none;
            cursor: pointer;
            font-size: 16px;
            margin: 20px;
            border-radius: 5px;
        }
        button:hover {
            background-color: #45a049; /* Color verde más oscuro */
        }
        .citas-container {
            padding: 20px;
            background-color: #333;
            border-radius: 10px;
            width: 100%;
            max-width: 100%; /* Ocupa todo el ancho disponible */
            margin: 0 auto;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
            overflow-x: auto;
        }
        .cita {
            background-color: #444;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: nowrap; /* Evita que los elementos se envuelvan */
        }
        .cita.cargada {
            background-color: #4CAF50; /* Color verde para las citas cargadas */
        }
        .cita div {
            margin: 0 15px;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            width: 22%; /* Los campos ahora ocupan un 22% del ancho */
        }
        .cita button {
            background-color: #f44336; /* Rojo para eliminar */
            color: white;
            border: none;
            padding: 5px 15px;
            cursor: pointer;
            border-radius: 5px;
            margin-top: 10px;
        }
        .cita button:hover {
            background-color: #d32f2f; /* Rojo más oscuro para hover */
        }
        .cita p {
            margin: 5px 0;
            font-size: 16px;
            width: 100%;
        }
        input[type="checkbox"] {
            margin-right: 10px;
        }
        .checkbox-container {
            display: flex;
            align-items: center;
            margin-top: 10px;
        }
        .checkbox-container button {
            margin-left: 10px;
        }
        /* Estilo adicional para mejorar la vista en pantallas pequeñas */
        @media (max-width: 768px) {
            .cita div {
                width: 48%; /* Los campos se ajustan para pantallas más pequeñas */
            }
        }
        /* Estilo para pantallas grandes */
        @media (min-width: 1200px) {
            .cita div {
                width: 18%; /* Para pantallas grandes, los campos ocupan un 18% */
            }
        }
    </style>
</head>
<body>

    <h1>Citas de Salidas</h1>

    <!-- Botón para redirigir a la página de agregar citas -->
    <button onclick="window.location.href='entrada.html'">Agregar Nueva Cita</button>

    <!-- Contenedor para las citas -->
    <div class="citas-container" id="citas-container">
        <h2>Citas Guardadas</h2>
        <!-- Las citas se agregarán aquí dinámicamente -->
    </div>

    <script>
        // Recuperar las citas guardadas desde localStorage
        const citasGuardadas = JSON.parse(localStorage.getItem('citas')) || [];

        // Ordenar las citas por "Horario de Carga" de más temprano a más tarde
        citasGuardadas.sort((a, b) => new Date(a.horario) - new Date(b.horario));

        // Seleccionar el contenedor donde se mostrarán las citas
        const citasContainer = document.getElementById('citas-container');

        // Mostrar las citas
        if (citasGuardadas.length > 0) {
            citasGuardadas.forEach((cita, index) => {
                const citaElement = document.createElement('div');
                citaElement.classList.add('cita');

                // Agregar el contenido de la cita
                citaElement.innerHTML = `
                    <div>
                        <p><strong>Horario de Carga:</strong> ${cita.horario}</p>
                    </div>
                    <div>
                        <p><strong>Cliente:</strong> ${cita.cliente}</p>
                    </div>
                    <div>
                        <p><strong>Número de Albarán:</strong> ${cita.albaran}</p>
                    </div>
                    <div>
                        <p><strong>Transporte:</strong> ${cita.transporte}</p>
                    </div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="checkbox-${index}" ${cita.cargada ? 'checked' : ''} onclick="toggleCargada(${index})">
                        <label for="checkbox-${index}">Cargado</label>
                        <button onclick="eliminarCita(${index})">Eliminar</button>
                    </div>
                `;

                // Si la cita está marcada como "Cargada", la ponemos en verde
                if (cita.cargada) {
                    citaElement.classList.add('cargada');
                }

                // Añadir la cita al contenedor
                citasContainer.appendChild(citaElement);
            });
        } else {
            citasContainer.innerHTML = '<p>No hay citas guardadas.</p>';
        }

        // Función para eliminar una cita
        function eliminarCita(index) {
            // Eliminar la cita del array de citas
            citasGuardadas.splice(index, 1);

            // Guardar las citas actualizadas en localStorage
            localStorage.setItem('citas', JSON.stringify(citasGuardadas));

            // Recargar la página para mostrar las citas actualizadas
            window.location.reload();
        }

        // Función para marcar como "Cargada" (checkbox)
        function toggleCargada(index) {
            // Cambiar el estado de "cargada" en el array de citas
            citasGuardadas[index].cargada = !citasGuardadas[index].cargada;

            // Guardar las citas actualizadas en localStorage
            localStorage.setItem('citas', JSON.stringify(citasGuardadas));

            // Recargar la página para actualizar los estilos de las citas
            window.location.reload();
        }
    </script>

</body>
</html>